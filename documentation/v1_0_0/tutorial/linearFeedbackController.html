<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Design linear feedback controller &mdash; trep documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.92-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="trep documentation" href="../index.html" />
    <link rel="up" title="Tutorial" href="index.html" />
    <link rel="next" title="Design energy shaping swing-up controller" href="energyShapingSwingupController.html" />
    <link rel="prev" title="Create a pendulum" href="pendulumSystem.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="energyShapingSwingupController.html" title="Design energy shaping swing-up controller"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pendulumSystem.html" title="Create a pendulum"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">trep documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Tutorial</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
    <script type="math/tex">
    \newcommand{\deriv}[2][]{\dfrac{\partial #1}{\partial #2}}
\newcommand{\tderiv}[2][]{\tfrac{\partial #1}{\partial #2}}
\newcommand{\fderiv}[2][]{\dfrac{d #1}{d #2}}
\newcommand{\derivII}[3][]{\dfrac{\partial^2 #1}{\partial #2 \partial #3}}
\newcommand{\tderivII}[3][]{\tfrac{\partial^2 #1}{\partial #2 \partial #3}}
\newcommand{\derivIII}[4][]{\dfrac{\partial^3 #1}{\partial #2 \partial #3 \partial #4}}
\newcommand{\tderivIII}[4][]{\tfrac{\partial^3 #1}{\partial #2 \partial #3 \partial #4}}
\newcommand{\derivIV}[5][]{\dfrac{\partial^4 #1}{\partial #2 \partial #3 \partial #4 \partial #5}}

\newcommand{\half}{\tfrac{1}{2}}  % Macro for 1/2

\newcommand{\ud}{\mathrm{d}}

\newcommand{\op}{\circ}
\newcommand{\dq}{\dot{q}}
\newcommand{\ddq}{\ddot{q}}

\newcommand{\dt}{\Delta t}


    </script>
    
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="design-linear-feedback-controller">
<h1>Design linear feedback controller<a class="headerlink" href="#design-linear-feedback-controller" title="Permalink to this headline">¶</a></h1>
<p>Let us now create a linear feedback controller that will stabilize the pendulum
system that was created in the last section to its upright, unstable equilibrium.</p>
<div class="section" id="create-pendulum-system">
<h2>Create pendulum system<a class="headerlink" href="#create-pendulum-system" title="Permalink to this headline">¶</a></h2>
<p>Let us start by using the same code from the last section that creates a simple
pendulum system with the addition of just a few lines.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Import necessary python modules</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="hll"><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">dot</span>
</span><span class="kn">import</span> <span class="nn">trep</span>
<span class="hll"><span class="kn">import</span> <span class="nn">trep.discopt</span>
</span><span class="kn">from</span> <span class="nn">trep</span> <span class="kn">import</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">,</span> <span class="n">tz</span><span class="p">,</span> <span class="n">rx</span><span class="p">,</span> <span class="n">ry</span><span class="p">,</span> <span class="n">rz</span>
<span class="hll"><span class="kn">import</span> <span class="nn">pylab</span>
</span>
<span class="c"># Build a pendulum system</span>
<span class="n">m</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="c"># Mass of pendulum</span>
<span class="n">l</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="c"># Length of pendulum</span>
<span class="n">q0</span> <span class="o">=</span> <span class="mf">3.</span><span class="o">/</span><span class="mf">4.</span><span class="o">*</span><span class="n">pi</span> <span class="c"># Initial configuration of pendulum</span>
<span class="n">t0</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c"># Initial time</span>
<span class="n">tf</span> <span class="o">=</span> <span class="mf">5.0</span> <span class="c"># Final time</span>
<span class="n">dt</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="c"># Sampling time</span>
<span class="hll"><span class="n">qBar</span> <span class="o">=</span> <span class="n">pi</span> <span class="c"># Desired configuration</span>
</span><span class="hll"><span class="n">Q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c"># Cost weights for states</span>
</span><span class="hll"><span class="n">R</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c"># Cost weights for inputs</span>
</span>
<span class="n">system</span> <span class="o">=</span> <span class="n">trep</span><span class="o">.</span><span class="n">System</span><span class="p">()</span> <span class="c"># Initialize system</span>

<span class="n">frames</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">rx</span><span class="p">(</span><span class="s">&#39;theta&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;pendulumShoulder&quot;</span><span class="p">),</span> <span class="p">[</span>
        <span class="n">tz</span><span class="p">(</span><span class="o">-</span><span class="n">l</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;pendulumArm&quot;</span><span class="p">,</span> <span class="n">mass</span><span class="o">=</span><span class="n">m</span><span class="p">)]]</span>
<span class="n">system</span><span class="o">.</span><span class="n">import_frames</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span> <span class="c"># Add frames</span>

<span class="c"># Add forces to the system</span>
<span class="n">trep</span><span class="o">.</span><span class="n">potentials</span><span class="o">.</span><span class="n">Gravity</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">9.8</span><span class="p">))</span> <span class="c"># Add gravity</span>
<span class="n">trep</span><span class="o">.</span><span class="n">forces</span><span class="o">.</span><span class="n">Damping</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span> <span class="c"># Add damping</span>
<span class="n">trep</span><span class="o">.</span><span class="n">forces</span><span class="o">.</span><span class="n">ConfigForce</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="s">&#39;theta&#39;</span><span class="p">,</span> <span class="s">&#39;theta-torque&#39;</span><span class="p">)</span> <span class="c"># Add input</span>

<span class="c"># Create and initialize the variational integrator</span>
<span class="n">mvi</span> <span class="o">=</span> <span class="n">trep</span><span class="o">.</span><span class="n">MidpointVI</span><span class="p">(</span><span class="n">system</span><span class="p">)</span>
<span class="n">mvi</span><span class="o">.</span><span class="n">initialize_from_configs</span><span class="p">(</span><span class="n">t0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">q0</span><span class="p">]),</span> <span class="n">t0</span><span class="o">+</span><span class="n">dt</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">q0</span><span class="p">]))</span>
</pre></div>
</div>
<p>Three additional (highlighted above) modules are imported: <tt class="docutils literal"><span class="pre">dot</span></tt> from the
<tt class="docutils literal"><span class="pre">numpy</span></tt> module, which we will use for matrix multiplication; <tt class="docutils literal"><span class="pre">pylab</span></tt> (part
of the <a class="reference external" href="http://matplotlib.org/">matplotlib project</a>, which is used for
plotting; and trep&#8217;s discrete optimization module, <a class="reference internal" href="../ref/optimal.html#module-trep.discopt" title="trep.discopt: Discrete Optimal Control Tools (Linux, Mac, Windows)"><tt class="xref py py-mod docutils literal"><span class="pre">trep.discopt</span></tt></a>.</p>
<p>In addition, a desired configuration value has been set to the variable
<tt class="docutils literal"><span class="pre">qBar</span></tt>. The desired configuration is <span class="math">\(\pi\)</span>, which is the pendulum&#8217;s
neutrally-stable, upright configuration. Also, correctly-dimensioned, identity
state and input weighting matrices (<tt class="docutils literal"><span class="pre">Q</span></tt> and <tt class="docutils literal"><span class="pre">R</span></tt> respectively) have been
created for the optimization of the linear feedback controller.</p>
</div>
<div class="section" id="create-discrete-system">
<h2>Create discrete system<a class="headerlink" href="#create-discrete-system" title="Permalink to this headline">¶</a></h2>
<p>Trep has a module that provides functionality for solving several linear,
time-varying discrete linear-quadratic regulation problems (see <a class="reference internal" href="../ref/dlqr.html#trep-dlqr"><em>this page</em></a>).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">TVec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">t0</span><span class="p">,</span> <span class="n">tf</span><span class="o">+</span><span class="n">dt</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span> <span class="c"># Initialize discrete time vector</span>
<span class="n">dsys</span> <span class="o">=</span> <span class="n">trep</span><span class="o">.</span><span class="n">discopt</span><span class="o">.</span><span class="n">DSystem</span><span class="p">(</span><span class="n">mvi</span><span class="p">,</span> <span class="n">TVec</span><span class="p">)</span> <span class="c"># Initialize discrete system</span>
<span class="n">xBar</span> <span class="o">=</span> <span class="n">dsys</span><span class="o">.</span><span class="n">build_state</span><span class="p">(</span><span class="n">qBar</span><span class="p">)</span> <span class="c"># Create desired state configuration</span>
</pre></div>
</div>
<p>To do this, we use our system definition, and a prescribed time vector to create
a <a class="reference internal" href="../ref/dsystem.html#trep.discopt.DSystem" title="trep.discopt.DSystem"><tt class="xref py py-class docutils literal"><span class="pre">trep.discopt.DSystem</span></tt></a>. This object is basically a wrapper for
<a class="reference internal" href="../ref/system.html#trep.System" title="trep.System"><tt class="xref py py-class docutils literal"><span class="pre">trep.System</span></tt></a> objects and <a class="reference internal" href="../ref/midpointvi.html#trep.MidpointVI" title="trep.MidpointVI"><tt class="xref py py-class docutils literal"><span class="pre">trep.MidpointVI</span></tt></a> objects to represent
the general nonlinear discrete systems as first order discrete nonlinear systems
of the form <span class="math">\(X(k+1) = f(X(k), U(k), k)\)</span>.</p>
<p>The states <span class="math">\(X\)</span> and inputs <span class="math">\(U\)</span> of a <a class="reference internal" href="../ref/dsystem.html#trep.discopt.DSystem" title="trep.discopt.DSystem"><tt class="xref py py-class docutils literal"><span class="pre">trep.discopt.DSystem</span></tt></a>
should be noted. The state consists of the variational integrator’s full
configuration, the dynamic momentum, and the kinematic velocity. The full
configuration consist of both dynamic states and kinematic states. The
difference being that the dynamic states are governed by first-order
differential equations and the kinematic states can be set directly with
&#8220;kinematic&#8221; inputs. This is equivalent to saying you have &#8220;perfect&#8221; control over
a dynamic configuration i.e. your system is capable of exerting unlimited force
to drive the configuration to follow any arbitrary trajectory. The kinematic
velocity is calculated as a finite difference of the kinematic
configurations. The <a class="reference internal" href="../ref/dsystem.html#trep.discopt.DSystem" title="trep.discopt.DSystem"><tt class="xref py py-class docutils literal"><span class="pre">trep.discopt.DSystem</span></tt></a> class has a method,
<a class="reference internal" href="../ref/dsystem.html#trep.discopt.DSystem.build_state" title="trep.discopt.DSystem.build_state"><tt class="xref py py-mod docutils literal"><span class="pre">trep.discopt.DSystem.build_state</span></tt></a>, that will &#8220;build&#8221; this state vector from
configuration, momentum, and kinematic velocity vectors. &#8220;Build&#8221; here means
construct a state array of the correct dimension. Anything that is not specified
is set to zero. This is used above to calculated a desired state array from the
desired configuration value.</p>
<p>Using IPython you can display a list of all the properties and methods of the
discrete system.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">dsys</span><span class="o">.</span>
<span class="go">dsys.build_input               dsys.fdu                       dsys.save_state_trajectory</span>
<span class="go">dsys.build_state               dsys.fdudu                     dsys.set</span>
<span class="go">dsys.build_trajectory          dsys.fdx                       dsys.split_input</span>
<span class="go">dsys.calc_feedback_controller  dsys.fdxdu                     dsys.split_state</span>
<span class="go">dsys.check_fdu                 dsys.fdxdx                     dsys.split_trajectory</span>
<span class="go">dsys.check_fdudu               dsys.k                         dsys.step</span>
<span class="go">dsys.check_fdx                 dsys.kf                        dsys.system</span>
<span class="go">dsys.check_fdxdu               dsys.linearize_trajectory      dsys.time</span>
<span class="go">dsys.check_fdxdx               dsys.load_state_trajectory     dsys.uk</span>
<span class="go">dsys.convert_trajectory        dsys.nU                        dsys.varint</span>
<span class="go">dsys.dproject                  dsys.nX                        dsys.xk</span>
<span class="go">dsys.f                         dsys.project</span>
</pre></div>
</div>
<p>Please refer to the <a class="reference internal" href="../ref/dsystem.html#trep-dsystem"><em>DSystem</em></a> documentation to learn more
about this object.</p>
</div>
<div class="section" id="id1">
<h2>Design linear feedback controller<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Let us now design a linear feedback controller to stabilize the pendulum to the
desired configuration.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Qd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">TVec</span><span class="p">),</span> <span class="n">dsys</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">nQ</span><span class="p">))</span> <span class="c"># Initialize desired configuration trajectory</span>
<span class="n">thetaIndex</span> <span class="o">=</span> <span class="n">dsys</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">get_config</span><span class="p">(</span><span class="s">&#39;theta&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">index</span> <span class="c"># Find index of theta config variable</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">t</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">TVec</span><span class="p">):</span>
    <span class="n">Qd</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">thetaIndex</span><span class="p">]</span> <span class="o">=</span> <span class="n">qBar</span> <span class="c"># Set desired configuration trajectory</span>
    <span class="p">(</span><span class="n">Xd</span><span class="p">,</span> <span class="n">Ud</span><span class="p">)</span> <span class="o">=</span> <span class="n">dsys</span><span class="o">.</span><span class="n">build_trajectory</span><span class="p">(</span><span class="n">Qd</span><span class="p">)</span> <span class="c"># Set desired state and input trajectory</span>

<span class="n">Qk</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span class="n">Q</span> <span class="c"># Create lambda function for state cost weights</span>
<span class="n">Rk</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span class="n">R</span> <span class="c"># Create lambda function for input cost weights</span>
<span class="n">KVec</span> <span class="o">=</span> <span class="n">dsys</span><span class="o">.</span><span class="n">calc_feedback_controller</span><span class="p">(</span><span class="n">Xd</span><span class="p">,</span> <span class="n">Ud</span><span class="p">,</span> <span class="n">Qk</span><span class="p">,</span> <span class="n">Rk</span><span class="p">)</span> <span class="c"># Solve for linear feedback controller gain</span>
<span class="n">KStabilize</span> <span class="o">=</span> <span class="n">KVec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c"># Use only use first value to approximate infinite-horizon optimal controller gain</span>

<span class="c"># Reset discrete system state</span>
<span class="n">dsys</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">q0</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.</span><span class="p">]),</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">DSystem</span></tt> class has a method
(<a class="reference internal" href="../ref/dsystem.html#trep.discopt.DSystem.calc_feedback_controller" title="trep.discopt.DSystem.calc_feedback_controller"><tt class="xref py py-mod docutils literal"><span class="pre">trep.discopt.DSystem.calc_feedback_controller</span></tt></a>) for calculating a
stabilizing feedback controller for the system about state and input
trajectories given both state and input weighting functions.</p>
<p>A trajectory of the desired configuration is constructed and then used with the
<a class="reference internal" href="../ref/dsystem.html#trep.discopt.DSystem.build_trajectory" title="trep.discopt.DSystem.build_trajectory"><tt class="xref py py-mod docutils literal"><span class="pre">trep.discopt.DSystem.build_trajectory</span></tt></a> method to create the desired state
and input trajectories. The weighting functions are created with Python lambda
functions that always output the state and input cost weights that were assigned
to <tt class="docutils literal"><span class="pre">Qk</span></tt> and <tt class="docutils literal"><span class="pre">Rk</span></tt>. The <tt class="docutils literal"><span class="pre">calc_feedback_controller</span></tt> method returns the gain
value <span class="math">\(K\)</span> for each instance in time. To approximate the infinite-horizon
optimal controller only the first value is used.</p>
<p>The discrete system must be reset to the initial state value because during the
optimization the discrete system is integrated and thus set to the final
time. Note, because the discrete system was created from the variational
integrator, which was created from the system; setting the discrete system
states also sets the configuration of variational integrator and the
system. This can be checked by checking the values before and after running the
<tt class="docutils literal"><span class="pre">set</span></tt> method, as shown below.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">dsys</span><span class="o">.</span><span class="n">xk</span>
<span class="go">array([ 3.14159265,  0.        ])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mvi</span><span class="o">.</span><span class="n">q1</span>
<span class="go">array([ 3.14159265])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">system</span><span class="o">.</span><span class="n">q</span>
<span class="go">array([ 3.14159265])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">dsys</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">q0</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.</span><span class="p">]),</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">dsys</span><span class="o">.</span><span class="n">xk</span>
<span class="go">array([ 2.35619449,  0.        ])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mvi</span><span class="o">.</span><span class="n">q1</span>
<span class="go">array([ 2.35619449])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">system</span><span class="o">.</span><span class="n">q</span>
<span class="go">array([ 2.34019535])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">mvi</span><span class="o">.</span><span class="n">q2</span> <span class="o">+</span> <span class="n">mvi</span><span class="o">.</span><span class="n">q1</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span>
<span class="go">array([ 2.34019535])</span>
</pre></div>
</div>
<p>Note that the <tt class="docutils literal"><span class="pre">system.q</span></tt> returns the current configuration of the <em>system</em>.
This is calculated using the midpoint rule and the endpoints of the variational
integrator as seen above.</p>
</div>
<div class="section" id="simulate-the-system-forward">
<h2>Simulate the system forward<a class="headerlink" href="#simulate-the-system-forward" title="Permalink to this headline">¶</a></h2>
<p>As was done in the <a class="reference external" href="pendulumSystem.html">previous section of this tutorial</a> the
system is simulated forward with a while loop, which steps it forward one time
step at a time.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">T</span> <span class="o">=</span> <span class="p">[</span><span class="n">mvi</span><span class="o">.</span><span class="n">t1</span><span class="p">]</span> <span class="c"># List to hold time values</span>
<span class="n">Q</span> <span class="o">=</span> <span class="p">[</span><span class="n">mvi</span><span class="o">.</span><span class="n">q1</span><span class="p">]</span> <span class="c"># List to hold configuration values</span>
<span class="n">X</span> <span class="o">=</span> <span class="p">[</span><span class="n">dsys</span><span class="o">.</span><span class="n">xk</span><span class="p">]</span> <span class="c"># List to hold state values</span>
<span class="n">U</span> <span class="o">=</span> <span class="p">[]</span> <span class="c"># List to hold input values</span>
<span class="k">while</span> <span class="n">mvi</span><span class="o">.</span><span class="n">t1</span> <span class="o">&lt;</span> <span class="n">tf</span><span class="o">-</span><span class="n">dt</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">dsys</span><span class="o">.</span><span class="n">xk</span> <span class="c"># Grab current state</span>
    <span class="n">xTilde</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="n">xBar</span> <span class="c"># Compare to desired state</span>
    <span class="n">u</span> <span class="o">=</span> <span class="o">-</span><span class="n">dot</span><span class="p">(</span><span class="n">KStabilize</span><span class="p">,</span> <span class="n">xTilde</span><span class="p">)</span> <span class="c"># Calculate input</span>
    <span class="n">dsys</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">u</span><span class="p">)</span> <span class="c"># Step the system forward by one time step</span>
    <span class="n">T</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mvi</span><span class="o">.</span><span class="n">t1</span><span class="p">)</span> <span class="c"># Update lists</span>
    <span class="n">Q</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mvi</span><span class="o">.</span><span class="n">q1</span><span class="p">)</span>
    <span class="n">X</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">U</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
</pre></div>
</div>
<p>This time the system is stepped forward with the
<a class="reference internal" href="../ref/dsystem.html#trep.discopt.DSystem.step" title="trep.discopt.DSystem.step"><tt class="xref py py-mod docutils literal"><span class="pre">trep.discopt.DSystem.step</span></tt></a> method instead of the
<a class="reference internal" href="../ref/midpointvi.html#trep.MidpointVI.step" title="trep.MidpointVI.step"><tt class="xref py py-mod docutils literal"><span class="pre">trep.MidpointVI.step</span></tt></a> method. This is done so that the discrete state gets
updated and set as well as the system configurations and momenta. The input is
calcuated with a standard negative feedback of the state error multiplied by the
gain that was found previously. In addition, two more variables are created to
store the state values and the input values throughout the simulation.</p>
</div>
<div class="section" id="visualize-the-system-in-action">
<h2>Visualize the system in action<a class="headerlink" href="#visualize-the-system-in-action" title="Permalink to this headline">¶</a></h2>
<p>The visualization is created in the exact way it was created in the last
section. But this time also plotting state and input verse time.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">trep</span><span class="o">.</span><span class="n">visual</span><span class="o">.</span><span class="n">visualize_3d</span><span class="p">([</span> <span class="n">trep</span><span class="o">.</span><span class="n">visual</span><span class="o">.</span><span class="n">VisualItem3D</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="n">Q</span><span class="p">)</span> <span class="p">])</span>

<span class="c"># Plot results</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">pylab</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">211</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">&quot;Linear Feedback Controller&quot;</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&quot;X&quot;</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s">&quot;qd&quot;</span><span class="p">,</span><span class="s">&quot;p&quot;</span><span class="p">])</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">212</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">U</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">&quot;T&quot;</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&quot;U&quot;</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s">&quot;u&quot;</span><span class="p">])</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/linearFeedbackController.gif" src="../_images/linearFeedbackController.gif" />
<img alt="../_images/linearFeedbackControllerPlot.png" src="../_images/linearFeedbackControllerPlot.png" />
<p>From the plot you can see that it requires a large input to stablize the
pendulum. What if the input torque is limited to a smaller value and we want to
bring the pendulum to the upright configuration from any other configuration? By
using a swing-up controller and then switching to this linear feedback
controller we can accomplish this stabilization with a limited input from any
configuration. We will demonstrate how this can be done with trep in the next
two sections.</p>
</div>
<div class="section" id="linearfeedbackcontroller-py-code">
<h2>linearFeedbackController.py code<a class="headerlink" href="#linearfeedbackcontroller-py-code" title="Permalink to this headline">¶</a></h2>
<p>Below is the entire script used in this section of the tutorial.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89</pre></div></td><td class="code"><div class="highlight"><pre><span class="c"># linearFeedbackController.py</span>

<span class="c"># Import necessary python modules</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">dot</span>
<span class="kn">import</span> <span class="nn">trep</span>
<span class="kn">import</span> <span class="nn">trep.discopt</span>
<span class="kn">from</span> <span class="nn">trep</span> <span class="kn">import</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">,</span> <span class="n">tz</span><span class="p">,</span> <span class="n">rx</span><span class="p">,</span> <span class="n">ry</span><span class="p">,</span> <span class="n">rz</span>
<span class="kn">import</span> <span class="nn">pylab</span>

<span class="c"># Build a pendulum system</span>
<span class="n">m</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="c"># Mass of pendulum</span>
<span class="n">l</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="c"># Length of pendulum</span>
<span class="n">q0</span> <span class="o">=</span> <span class="mf">3.</span><span class="o">/</span><span class="mf">4.</span><span class="o">*</span><span class="n">pi</span> <span class="c"># Initial configuration of pendulum</span>
<span class="n">t0</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="c"># Initial time</span>
<span class="n">tf</span> <span class="o">=</span> <span class="mf">5.0</span> <span class="c"># Final time</span>
<span class="n">dt</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="c"># Sampling time</span>
<span class="n">qBar</span> <span class="o">=</span> <span class="n">pi</span> <span class="c"># Desired configuration</span>
<span class="n">Q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c"># Cost weights for states</span>
<span class="n">R</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c"># Cost weights for inputs</span>

<span class="n">system</span> <span class="o">=</span> <span class="n">trep</span><span class="o">.</span><span class="n">System</span><span class="p">()</span> <span class="c"># Initialize system</span>

<span class="n">frames</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">rx</span><span class="p">(</span><span class="s">&#39;theta&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;pendulumShoulder&quot;</span><span class="p">),</span> <span class="p">[</span>
        <span class="n">tz</span><span class="p">(</span><span class="o">-</span><span class="n">l</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;pendulumArm&quot;</span><span class="p">,</span> <span class="n">mass</span><span class="o">=</span><span class="n">m</span><span class="p">)]]</span>
<span class="n">system</span><span class="o">.</span><span class="n">import_frames</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span> <span class="c"># Add frames</span>

<span class="c"># Add forces to the system</span>
<span class="n">trep</span><span class="o">.</span><span class="n">potentials</span><span class="o">.</span><span class="n">Gravity</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">9.8</span><span class="p">))</span> <span class="c"># Add gravity</span>
<span class="n">trep</span><span class="o">.</span><span class="n">forces</span><span class="o">.</span><span class="n">Damping</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span> <span class="c"># Add damping</span>
<span class="n">trep</span><span class="o">.</span><span class="n">forces</span><span class="o">.</span><span class="n">ConfigForce</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="s">&#39;theta&#39;</span><span class="p">,</span> <span class="s">&#39;theta-torque&#39;</span><span class="p">)</span> <span class="c"># Add input</span>

<span class="c"># Create and initialize the variational integrator</span>
<span class="n">mvi</span> <span class="o">=</span> <span class="n">trep</span><span class="o">.</span><span class="n">MidpointVI</span><span class="p">(</span><span class="n">system</span><span class="p">)</span>
<span class="n">mvi</span><span class="o">.</span><span class="n">initialize_from_configs</span><span class="p">(</span><span class="n">t0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">q0</span><span class="p">]),</span> <span class="n">t0</span><span class="o">+</span><span class="n">dt</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">q0</span><span class="p">]))</span>

<span class="c"># Create discrete system</span>
<span class="n">TVec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">t0</span><span class="p">,</span> <span class="n">tf</span><span class="o">+</span><span class="n">dt</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span> <span class="c"># Initialize discrete time vector</span>
<span class="n">dsys</span> <span class="o">=</span> <span class="n">trep</span><span class="o">.</span><span class="n">discopt</span><span class="o">.</span><span class="n">DSystem</span><span class="p">(</span><span class="n">mvi</span><span class="p">,</span> <span class="n">TVec</span><span class="p">)</span> <span class="c"># Initialize discrete system</span>
<span class="n">xBar</span> <span class="o">=</span> <span class="n">dsys</span><span class="o">.</span><span class="n">build_state</span><span class="p">(</span><span class="n">qBar</span><span class="p">)</span> <span class="c"># Create desired state configuration</span>

<span class="c"># Design linear feedback controller</span>
<span class="n">Qd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">TVec</span><span class="p">),</span> <span class="n">dsys</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">nQ</span><span class="p">))</span> <span class="c"># Initialize desired configuration trajectory</span>
<span class="n">thetaIndex</span> <span class="o">=</span> <span class="n">dsys</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">get_config</span><span class="p">(</span><span class="s">&#39;theta&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">index</span> <span class="c"># Find index of theta config variable</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">t</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">TVec</span><span class="p">):</span>
    <span class="n">Qd</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">thetaIndex</span><span class="p">]</span> <span class="o">=</span> <span class="n">qBar</span> <span class="c"># Set desired configuration trajectory</span>
    <span class="p">(</span><span class="n">Xd</span><span class="p">,</span> <span class="n">Ud</span><span class="p">)</span> <span class="o">=</span> <span class="n">dsys</span><span class="o">.</span><span class="n">build_trajectory</span><span class="p">(</span><span class="n">Qd</span><span class="p">)</span> <span class="c"># Set desired state and input trajectory</span>

<span class="n">Qk</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span class="n">Q</span> <span class="c"># Create lambda function for state cost weights</span>
<span class="n">Rk</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span class="n">R</span> <span class="c"># Create lambda function for input cost weights</span>
<span class="n">KVec</span> <span class="o">=</span> <span class="n">dsys</span><span class="o">.</span><span class="n">calc_feedback_controller</span><span class="p">(</span><span class="n">Xd</span><span class="p">,</span> <span class="n">Ud</span><span class="p">,</span> <span class="n">Qk</span><span class="p">,</span> <span class="n">Rk</span><span class="p">)</span> <span class="c"># Solve for linear feedback controller gain</span>
<span class="n">KStabilize</span> <span class="o">=</span> <span class="n">KVec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c"># Use only use first value to approximate infinite-horizon optimal controller gain</span>

<span class="c"># Reset discrete system state</span>
<span class="n">dsys</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">q0</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.</span><span class="p">]),</span> <span class="mi">0</span><span class="p">)</span>

<span class="c"># Simulate the system forward</span>
<span class="n">T</span> <span class="o">=</span> <span class="p">[</span><span class="n">mvi</span><span class="o">.</span><span class="n">t1</span><span class="p">]</span> <span class="c"># List to hold time values</span>
<span class="n">Q</span> <span class="o">=</span> <span class="p">[</span><span class="n">mvi</span><span class="o">.</span><span class="n">q1</span><span class="p">]</span> <span class="c"># List to hold configuration values</span>
<span class="n">X</span> <span class="o">=</span> <span class="p">[</span><span class="n">dsys</span><span class="o">.</span><span class="n">xk</span><span class="p">]</span> <span class="c"># List to hold state values</span>
<span class="n">U</span> <span class="o">=</span> <span class="p">[]</span> <span class="c"># List to hold input values</span>
<span class="k">while</span> <span class="n">mvi</span><span class="o">.</span><span class="n">t1</span> <span class="o">&lt;</span> <span class="n">tf</span><span class="o">-</span><span class="n">dt</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">dsys</span><span class="o">.</span><span class="n">xk</span> <span class="c"># Grab current state</span>
    <span class="n">xTilde</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="n">xBar</span> <span class="c"># Compare to desired state</span>
    <span class="n">u</span> <span class="o">=</span> <span class="o">-</span><span class="n">dot</span><span class="p">(</span><span class="n">KStabilize</span><span class="p">,</span> <span class="n">xTilde</span><span class="p">)</span> <span class="c"># Calculate input</span>
    <span class="n">dsys</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">u</span><span class="p">)</span> <span class="c"># Step the system forward by one time step</span>
    <span class="n">T</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mvi</span><span class="o">.</span><span class="n">t1</span><span class="p">)</span> <span class="c"># Update lists</span>
    <span class="n">Q</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mvi</span><span class="o">.</span><span class="n">q1</span><span class="p">)</span>
    <span class="n">X</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">U</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>

<span class="c"># Visualize the system in action</span>
<span class="n">trep</span><span class="o">.</span><span class="n">visual</span><span class="o">.</span><span class="n">visualize_3d</span><span class="p">([</span> <span class="n">trep</span><span class="o">.</span><span class="n">visual</span><span class="o">.</span><span class="n">VisualItem3D</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="n">Q</span><span class="p">)</span> <span class="p">])</span>

<span class="c"># Plot results</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">pylab</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">211</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">&quot;Linear Feedback Controller&quot;</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&quot;X&quot;</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s">&quot;qd&quot;</span><span class="p">,</span><span class="s">&quot;p&quot;</span><span class="p">])</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">212</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">U</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">&quot;T&quot;</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&quot;U&quot;</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s">&quot;u&quot;</span><span class="p">])</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


          </div>
        </div>
      </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
    <h2><a href="http://murpheylab.github.io/trep/">Project Website</a></h2>

  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Design linear feedback controller</a><ul>
<li><a class="reference internal" href="#create-pendulum-system">Create pendulum system</a></li>
<li><a class="reference internal" href="#create-discrete-system">Create discrete system</a></li>
<li><a class="reference internal" href="#id1">Design linear feedback controller</a></li>
<li><a class="reference internal" href="#simulate-the-system-forward">Simulate the system forward</a></li>
<li><a class="reference internal" href="#visualize-the-system-in-action">Visualize the system in action</a></li>
<li><a class="reference internal" href="#linearfeedbackcontroller-py-code">linearFeedbackController.py code</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="pendulumSystem.html"
                        title="previous chapter">Create a pendulum</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="energyShapingSwingupController.html"
                        title="next chapter">Design energy shaping swing-up controller</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/tutorial/linearFeedbackController.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="energyShapingSwingupController.html" title="Design energy shaping swing-up controller"
             >next</a> |</li>
        <li class="right" >
          <a href="pendulumSystem.html" title="Create a pendulum"
             >previous</a> |</li>
        <li><a href="../index.html">trep documentation</a> &raquo;</li>
          <li><a href="index.html" >Tutorial</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, Elliot Johnson.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>